# ---------------------------------------------------------------------------- #
## \author Sebastien Beaugrand
## \sa http://beaugrand.chez.com/
## \copyright CeCILL 2.1 Free Software license
## \note Cinnamon restart : ctrl+alt+esc
# ---------------------------------------------------------------------------- #
---
- name: applets
  community.general.dconf:
    key: /org/cinnamon/enabled-applets
    value: "[
      'panel1:center:0:menu@cinnamon.org:0',
      'panel1:center:1:grouped-window-list@cinnamon.org:1',
      'panel1:right:0:systray@cinnamon.org:2',
      'panel1:right:1:xapp-status@cinnamon.org:3',
      'panel1:right:2:notifications@cinnamon.org:4',
      'panel1:right:3:removable-drives@cinnamon.org:5',
      'panel1:right:4:network@cinnamon.org:6',
      'panel1:right:5:sound@cinnamon.org:7',
      'panel1:right:6:power@cinnamon.org:8',
      'panel1:right:7:calendar@cinnamon.org:9'
      ]"

- name: autohide
  community.general.dconf:
    key: /org/cinnamon/panels-autohide
    value: "['1:true']"

- name: effects
  community.general.dconf:
    key: /org/cinnamon/desktop-effects-workspace
    value: false

- name: pinned-apps
  copy:
    content: "{{ js | to_nice_json}}"
    dest: "{{ js_file }}"
  vars:
    js: "{{ (lookup('file', js_file) | from_json) |
      combine({'pinned-apps':{'type':'generic','default':[],'value':[
      'screen.desktop',
      'chromium.desktop',
      'emacsclient.desktop',
      'thunar.desktop'
      ]}}) }}"
    js_file: "{{ home
    }}/.config/cinnamon/spices/grouped-window-list@cinnamon.org/1.json"

- name: nocap
  copy:
    src: nocap.desktop
    dest: "{{ home }}/.config/autostart/"

- name: rfkill
  copy:
    src: rfkill.desktop
    dest: "{{ home }}/.config/autostart/"

- name: numlock
  copy:
    src: numlock.desktop
    dest: "{{ home }}/.config/autostart/"
