<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<title>mfinst.sh</title>
<meta name="Generator" content="Vim/8.1">
<meta name="plugin-version" content="vim8.1_v1">
<meta name="syntax" content="bash">
<meta name="settings" content="use_css,pre_wrap,no_foldcolumn,expand_tabs,prevent_copy=">
<meta name="colorscheme" content="default">
<style type="text/css">
<!--
pre { white-space: pre-wrap; font-family: monospace; color: #ffffff; background-color: #000000; }
body { font-family: monospace; color: #ffffff; background-color: #000000; }
* { font-size: 1em; }
.Constant { color: #ff6060; }
.Special { color: #ff40ff; }
.Identifier { color: #00ffff; }
.Statement { color: #ffff00; }
.Comment { color: #8080ff; }
.PreProc { color: #ff40ff; }
-->
</style>
</head>
<body>
<pre id='vimCodeElement'>
<span class="Comment">#!/bin/bash</span>
<span class="Comment"># ---------------------------------------------------------------------------- #</span>
<span class="Comment">## \file mfinst.sh</span>
<span class="Comment">## \author Sebastien Beaugrand</span>
<span class="Comment">## \sa <a href="http://beaugrand.chez.com/">http://beaugrand.chez.com/</a></span>
<span class="Comment">## \copyright CeCILL 2.1 Free Software license</span>
<span class="Comment"># ---------------------------------------------------------------------------- #</span>
<span class="Comment"># Pour convertir en TTF :</span>
<span class="Comment"># mftrace --formats=ttf $name.mf</span>
<span class="Comment"># ---------------------------------------------------------------------------- #</span>
<span class="Identifier">texdir</span>=/usr/share/texmf

<span class="Statement">if </span><span class="Statement">[</span> <span class="Statement">-z</span> <span class="Statement">&quot;</span><span class="PreProc">$1</span><span class="Statement">&quot;</span> <span class="Statement">]</span><span class="Statement">;</span> <span class="Statement">then</span>
    <span class="Statement">echo</span><span class="Constant"> </span><span class="Statement">&quot;</span><span class="Constant">Usage: </span><span class="Special">`basename </span><span class="PreProc">$0</span><span class="Special">`</span><span class="Constant"> &lt;font.mf&gt;</span><span class="Statement">&quot;</span>
    <span class="Statement">exit</span> <span class="Constant">0</span>
<span class="Statement">fi</span>
<span class="Identifier">name</span>=<span class="PreProc">${</span><span class="PreProc">1</span><span class="Statement">%</span>.mf<span class="PreProc">}</span>

<span class="Identifier">user</span>=<span class="Special">`whoami`</span>
<span class="Statement">if </span><span class="Statement">[</span> <span class="PreProc">$user</span> <span class="Statement">!=</span> <span class="Statement">&quot;</span><span class="Constant">root</span><span class="Statement">&quot;</span> <span class="Statement">]</span><span class="Statement">;</span> <span class="Statement">then</span>
    su <span class="Statement">-c</span> <span class="Statement">&quot;</span><span class="PreProc">$0</span><span class="Constant"> </span><span class="PreProc">$*</span><span class="Statement">&quot;</span>
    <span class="Statement">exit</span> <span class="PreProc">$?</span>
<span class="Statement">fi</span>

<span class="Statement">mkdir</span> <span class="Special">-p</span> <span class="PreProc">$texdir</span>/tex/latex/<span class="PreProc">$name</span>

cat <span class="Statement">&gt;</span><span class="PreProc">$texdir</span>/tex/latex/<span class="PreProc">$name</span>/<span class="PreProc">$name</span>.sty <span class="Statement">&lt;&lt; EOF</span>
<span class="Constant">\NeedsTeXFormat{LaTeX2e}</span>
<span class="Constant">\ProvidesPackage{</span><span class="PreProc">$name</span><span class="Constant">}</span>
<span class="Special">\n</span><span class="Constant">ewcommand{</span><span class="Special">\\</span><span class="PreProc">$name</span><span class="Constant">}[1]{{</span><span class="Special">\f</span><span class="Constant">ontencoding{T1}</span><span class="Special">\f</span><span class="Constant">ontfamily{</span><span class="PreProc">$name</span><span class="Constant">}</span><span class="Special">\s</span><span class="Constant">electfont #1}}</span>
<span class="Special">\e</span><span class="Constant">ndinput</span>
<span class="Statement">EOF</span>

cat <span class="Statement">&gt;</span><span class="PreProc">$texdir</span>/tex/latex/<span class="PreProc">$name</span>/t1<span class="PreProc">$name</span>.fd <span class="Statement">&lt;&lt; EOF</span>
<span class="Constant">\ProvidesFile{t1</span><span class="PreProc">$name</span><span class="Constant">.fd}</span>
<span class="Constant">\DeclareFontFamily{T1}{</span><span class="PreProc">$name</span><span class="Constant">}{}</span>
<span class="Constant">\DeclareFontShape{T1}{</span><span class="PreProc">$name</span><span class="Constant">}{m}{n}{&lt;-&gt; </span><span class="PreProc">$name</span><span class="Constant">}{}</span>
<span class="Special">\e</span><span class="Constant">ndinput</span>
<span class="Statement">EOF</span>

<span class="Statement">mkdir</span> <span class="Special">-p</span> <span class="PreProc">$texdir</span>/fonts/<span class="Statement">source</span>/public/<span class="PreProc">$name</span>
cp <span class="Special">-f</span> <span class="PreProc">$name</span>.mf <span class="PreProc">$texdir</span>/fonts/<span class="Statement">source</span>/public/<span class="PreProc">$name</span>/
texhash <span class="Statement">&gt;</span>/dev/null
</pre>
</body>
</html>
<!-- vim: set foldmethod=manual : -->
